# Tmux Cheatsheet

> 基于个人 .tmux.conf 配置的快捷键指南

## 基础信息

- **Prefix**: `Ctrl-Space` (默认 `Ctrl-b` 已改为 `Ctrl-Space`)
- **模式键**: Vi 模式
- **鼠标**: 已启用
- **窗口/面板索引**: 从 1 开始（非默认的 0）

---

## 会话 (Session) 管理

| 快捷键 | 功能 |
|--------|------|
| `Prefix` + `C-s` | 创建新会话 |
| `Prefix` + `.` | 重命名当前会话（脚本提示） |
| `Prefix` + `u` | 向左移动会话 |
| `Prefix` + `o` | 向右移动会话 |

---

## 窗口 (Window) 管理

### 窗口操作

| 快捷键 | 功能 |
|--------|------|
| `Ctrl-w` | 创建新窗口（在当前路径） |
| `Ctrl-q` | 关闭当前面板 |
| `Prefix` + `,` | 重命名当前窗口 |
| `Ctrl-u` | 将当前窗口向左移动 |
| `Ctrl-o` | 将当前窗口向右移动 |

### 窗口导航

| 快捷键 | 功能 |
|--------|------|
| `Ctrl-p` | 上一个窗口 |
| `Ctrl-n` | 下一个窗口 |
| `F1` - `F9` | 快速切换到窗口 1-9 |

### 移动窗口到其他会话

| 快捷键 | 功能 |
|--------|------|
| `Prefix` + `1-9` | 将当前窗口移动到会话 1-9 |
| `Prefix` + `0` | 将当前窗口移动到会话 10 |

---

## 面板 (Pane) 管理

### 分割面板

| 快捷键 | 功能 |
|--------|------|
| `Prefix` + `h` | 在左侧分割垂直面板 |
| `Prefix` + `j` | 在下方分割水平面板 |
| `Prefix` + `k` | 在上方分割水平面板 |
| `Prefix` + `l` | 在右侧分割垂直面板 |
| `Ctrl-b` | 将当前面板分离为新窗口 |

**记忆方法**: `hjkl` 对应 Vim 的方向键，表示在该方向分割

### 面板导航

| 快捷键 | 功能 |
|--------|------|
| `Ctrl-h` | 移动到左侧面板（Vim-Tmux Navigator） |
| `Ctrl-j` | 移动到下方面板 |
| `Ctrl-k` | 移动到上方面板 |
| `Ctrl-l` | 移动到右侧面板 |

**注意**: 这些快捷键通过 `vim_tmux_navigator.sh` 脚本实现，与 Vim 无缝集成

### 调整面板大小

| 快捷键 | 功能 |
|--------|------|
| `Alt-h` | 向左扩展 3 单位 |
| `Alt-j` | 向下扩展 3 单位 |
| `Alt-k` | 向上扩展 3 单位 |
| `Alt-l` | 向右扩展 3 单位 |
| `Ctrl-f` | 最大化/还原当前面板 |

### 交换面板

| 快捷键 | 功能 |
|--------|------|
| `Prefix` + `>` | 与下一个面板交换 |
| `Prefix` + `<` | 与上一个面板交换 |
| `Prefix` + `\|` | 交换面板位置 |

---

## 复制模式 (Vi 模式)

### 进入/退出复制模式

| 快捷键 | 功能 |
|--------|------|
| `Prefix` + `[` | 进入复制模式（标准 Tmux） |
| `Prefix` + `]` | 粘贴缓冲区内容（标准 Tmux） |
| `q` | 退出复制模式 |

### 复制模式快捷键

| 快捷键 | 功能 |
|--------|------|
| `v` | 开始选择（Vi visual 模式） |
| `Alt-r` | 切换矩形选择模式 |
| `y` | 复制选择内容并退出复制模式 |
| `Ctrl-v` | 从系统剪贴板粘贴 |
| `Ctrl-Shift-v`（复制模式中） | 取消并从系统剪贴板粘贴 |

---

## 配置与其他

| 快捷键 | 功能 |
|--------|------|
| `Prefix` + `r` | 重新加载 `~/.tmux.conf` 配置 |

---

## 自定义脚本

你的配置集成了多个自定义脚本（位于 `~/.config/tmux/scripts/`）：

- **vim_tmux_navigator.sh**: Vim-Tmux 无缝导航集成
- **new_session.sh**: 创建新会话脚本（已注释）
- **rename_session_prompt.sh**: 会话重命名提示
- **move_session.sh**: 会话左右移动
- **move_window_to_session.sh**: 窗口移动到指定会话
- **paste_from_clipboard.sh**: 系统剪贴板粘贴
- **pane_starship_title.sh**: 面板标题显示（Starship 集成）
- **update_theme_color.sh**: 动态主题颜色更新

状态栏脚本（位于 `~/.config/tmux/status/`）：
- **left.sh**: 左侧状态栏（会话信息）
- **right.sh**: 右侧状态栏

---

## 重要配置

### 通用设置

- **历史记录限制**: 10,000 行
- **Escape 延迟**: 0ms（无延迟）
- **重复超时**: 300ms
- **自动重命名**: 开启
- **窗口重新编号**: 开启（关闭窗口后自动重新编号）

### 视觉设置

- **Pane 边框**: 顶部显示状态
- **活动 Pane 边框**: 紫色 (`#b294bb`)
- **非活动 Pane 边框**: 灰色 (`colour244`)
- **主题颜色**: 动态（通过 `@theme_color` 变量）

### 终端支持

- **默认终端**: `tmux-256color`
- **真彩色支持**: 已启用
- **鼠标支持**: 已启用

---

## 快速参考

### 最常用快捷键

```
Prefix = Ctrl-Space

# 窗口管理
Ctrl-w          创建窗口
F1-F9           切换窗口 1-9
Ctrl-p/n        上一个/下一个窗口

# 面板管理
Prefix h/j/k/l  分割面板（左/下/上/右）
Ctrl-h/j/k/l    导航面板（Vim 风格）
Alt-h/j/k/l     调整面板大小
Ctrl-f          最大化/还原面板

# 复制模式
Prefix [        进入复制模式
v               开始选择
y               复制并退出
Ctrl-v          从系统剪贴板粘贴

# 其他
Prefix r        重新加载配置
Ctrl-q          关闭面板
```

---

## 技巧与建议

1. **Vim 集成**: 在 Vim 中使用 `Ctrl-h/j/k/l` 可以无缝在 Vim 分屏和 Tmux 面板之间导航

2. **窗口快速切换**: 使用 `F1-F9` 快速切换窗口，比 `Prefix + 数字` 更快

3. **面板分割**: 记住 `hjkl` = 方向，`Prefix + 方向` = 在该方向分割面板

4. **系统剪贴板**: 使用 `Ctrl-v` 可以直接粘贴系统剪贴板内容，无需 `Prefix`

5. **会话管理**: 使用 `Prefix + .` 重命名会话，使用 `Prefix + u/o` 在会话间快速切换

6. **主题颜色**: 配置支持动态主题颜色，可以通过设置 `TMUX_THEME_COLOR` 环境变量修改

---

## 故障排除

### 颜色显示不正常
确保终端支持真彩色，并设置 `TERM=tmux-256color`

### Vim-Tmux 导航不工作
检查 `vim_tmux_navigator.sh` 脚本是否已安装并具有可执行权限

### 自定义脚本不工作
确保所有脚本具有可执行权限：
```bash
chmod +x ~/.config/tmux/scripts/*.sh
chmod +x ~/.config/tmux/status/*.sh
```

---

**更新时间**: 2026-01-07
**配置文件**: `~/.tmux.conf`
